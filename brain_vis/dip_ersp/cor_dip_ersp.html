<!doctype html>
<head>
    <title>MM Cluster Visualization</title>
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <!-- <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   
</head>
<style>
    a {
        font-family: 'Verdana', Geneva, sans-serif;
        font-size:50px;
        color: white;
        padding: 0px 25px;
    }

    .nav {
        position: absolute;
        width: 4000px;
        z-index: 99;
    }

    .body {
        position: absolute;
    }
   
    .background {
    /* position: fixed; */
    top: 100;
    left: -200px;
    z-index: -1;
    /* padding-left: 200px; */
    margin-bottom: 200px;
    object-fit: cover;
    height: 2750px; 
    display: block;
    
    }
   
    #cl3 {
    position: absolute;
    top: 1063px;
    left: 700px;
    z-index: 1;
    }
    #cl4 {
    position: absolute;
    top: 1600px;
    left: 1300px;
    z-index: 1;
    }
    #cl5 {
    position: absolute;
    top: 1042px;
    left: 2046px;
    z-index: 1;
    }
    #cl6 {
    position: absolute;
    top: 1787px;
    left: 1250px;
    }
    #cl7 {
    position: absolute;
    top: 803px;
    left: 2058px;
    }
    #cl8 {
    position: absolute;
    top: 1210px;
    left: 2115px;
    z-index: 1;
    }
    #cl9 {
    position: absolute;
    top: 616px;
    left: 1300px;
    }
    #cl10 {
    position: absolute;
    top: 454px;
    left: 995px;
    z-index: 1;
    }
    #cl11 {
    position: absolute;
    top: 2002px;
    left: 2126px;
    }
    #cl12 {
    position: absolute;
    top: 1224px;
    left: 1290px;
    }
    #cl13 {
    position: absolute;
    top: 1321px;
    left: 524px;
    }
    #cl14 {
    position: absolute;
    top: 999px;
    left: 1276px;
    }

    .textbox {
    position:absolute;
    width: 400px;
    /* height: 300px; */
    overflow-wrap: break-word;
    background : rgb(175, 182, 175);
    z-index : 2;
    font-family: 'Arial', Helvetica, sans-serif;
    }
</style>

<body class = "body" style="background-color:black;" >

    <div class = "nav">
        <a href = "horz_dip_ersp.html">Horizontal ERP</a>
        <a href = "sag_dip_ersp.html">Sagittal ERP</a> 
        <a href = "cor_dip_ersp.html">Coronal ERP</a>  <br>
        <a href = "horz_dip_ersp_ersp.html">Horizontal ERSP</a>
        <a href = "sag_dip_ersp_ersp.html">Sagittal ERSP</a> 
        <a href = "cor_dip_ersp_ersp.html">Coronal ERSP</a> <br>
        <a href = "../dip_only/horz_dip_only.html">[Switch clusterings]</a> <br>
    </div>
    <!-- <svg id "graph"></svg> -->


    <img class = "background" src="../img/c_brain_slice.png">

    <div id = 'graph'></div>

    <img id ='cl3' src="../img/dip_ersp/c3.png" />
    <div class = 'textbox' id = 'div3' style = "display: none;"> <b>B3: TP+ (time) LR- (Trough, PR Biphasic) Mirror: B11</b>
        Mainly a negative peak at ~200 ms (Press right has a earlier positive peak before press. It would be useful to check variance to see if stat significant.)  The shift b/w two bottom peaks (tap and press right) could be due to latency.<br>
        
        Right troughs slightly lower than left.<br><br>
        <b>ERSP:</b> TP+ (tap has more high and low freq regime) LR+ (L has more negative power) 
    </div>

    <img id="cl4" src="../img/dip_ersp/c4.png" />
    <div class = 'textbox' id = 'div4' style = "display: none;"> <b>B4: TP+ (time) LR+ (amp L>R), Biphasic, Mirror: B6</b>
        ERP: Biphasic (posive/negative). <br>
        Press: broader positive peak, smaller negative <br>
        Tap: sharp positive/negative peaks.  In both, Left is higher.
       <br>  More comments from other clustering.<br><br>
        <b>ERSP:</b> TP+ (tap has more power, press low power overall except middle range) LR+ (p:R>L, t: L>R)
    </div>

    <img id="cl5" src="../img/dip_ersp/c5.png" />
    <div class = 'textbox' id = 'div5' style = "display: none;">
        <b>B11: TP+ (time and amp), LR-, large trough, high oscillation, Mirror: B4</b><br>
        P/T difference, especially @ t=0.<br>
        
        Left slightly above right especially for tap.<br>
        Would be useful to use same vertical scale for all plots (to compare w/ B4's ERP).<br>
        
        Dipoles mirror B3.<br><br>
        <b>ERSP:</b> TP+ (tap: big negative spot, higher low f power) LR+ (pR: high earlier activity, tL: more power overall)
       </div>

    <img id="cl6" src="../img/dip_ersp/c6.png" />
    <div class = 'textbox' id = 'div6' style = "display: none;"><b>B6: TP+ (time) LR+ (amp L>R), biphasic</b><br>
        Synchronous for most part; tap slightly later.  PL broader start and early response.<br>
        
        Downard slope before 0.<br>
        
        Left slightly above right.<br>
        Could shift time scale to line them up; investigate ERP plot separately. (notes on journal)<br><br>
        <b>ERSP:</b> Not similar to other clustering. TP+ (press more negative low f, more higher f.  Tap: strong low f 0 burst) LR+ (pR more negative)

    </div>

    <img id="cl7" src="../img/dip_ersp/c7.png" />
    <div class = 'textbox' id = 'div7' style = "display: none;"> 
        <b>B7: TP+(time) LR+ (amp L>R), Biphasic emphasis on peak</b><br>

        LR diff: left seems to oscillate w/ higher amp<br>
        ERP could be a L/R mirror of B6.<br>
        
        Very similar to B5 (except t=0)?<br>
        
        RIght amplitude < left<br><br>
        <b>ERSP:</b> TP+ (tR has no pos power; tap small low-f burst @0) LR+ (R strong negative med freq @200)
    </div>
    
    <img id="cl8" src="../img/dip_ersp/c8.png" />
    <div class = 'textbox' id = 'div8' style = "display: none;"><b>B14: PT+ (time) LR + (amp |L| >>> |R|), biphasic</b><br>
        Left preference (troughs first, but before t=0 which is interesting).<br><br>
        
        Tap left slightly above at ~100ms<br>
        Most of press left before peak press occurs.<br><br>
        
        Ziyi's not similar<br><br>
        <b>ERSP:</b> TP+ (tap higher power throughout) LR+ (pL: highest power med f; tR: less power after 600ms)
    </div>
    

    <img id="cl9" src="../img/dip_ersp/c9.png" />
    <div class = 'textbox' id = 'div9' style = "display: none;"><b>**B9: TP+(amp; pre t=0) LR-, biphasic</b><br>
        Not as much of a TP time difference compared to others.<br>
        Mostly press vs tap difference.  Tap slightly below.<br>
        
        On avg left slightly above right (esp initial peak; mostly for tap).<br>
        Tap: L/R distinction ~800 ms<br>
        Maybe symmetric to B5.<br>
        
        Press & Tap difference in the amplitude of the positive peak<br><br>
        <b>ERSP:</b> TP+ (tap: strong lower power) LR~+ (pR has more alpha)

    </div>

    <img id="cl10" src="../img/dip_ersp/c10.png" />
    <div class = 'textbox' id = 'div10' style = "display: none;"><b>B10: TP+ (time) LR+ (only for press; amp, R>L), biphasic, Mirror: B5</b>
        
        
        Press: Has broader peak  <br>
        Tap: not much L/R difference<br>
           - Some difference right after 0 but synchronizes again
        Slight L/R distinction overall<br>
        
        L/R mirror of B5? (although peaks higher)<br><br>
        <b>ERSP:</b> TP+ (press: neg power @300ms, tap: pos power @200ms) LR+ (More med freq neg power for left)
    </div>

    <img id="cl11" src="../img/dip_ersp/c11.png" />
    <div class = 'textbox' id = 'div11' style = "display: none;"><b>**B11: PT+ (amp and time) LR+ (amp L>>R;mostly for tap), Big Peak</b><br>
        â˜† Noted as interesting.  ERP seems to prefer Left.<br><br>
        
        All of press peaks but only tap left peaks.<br><br>
        
        Warning: low IC count<br><br>
        <b>ERSP:</b> TP+ (Press mostly negative) LR~+ (pR more negative low f, tL higher power high f)
    </div>

    <img id="cl12" src="../img/dip_ersp/c12.png" />
    <div class = 'textbox' id = 'div12' style = "display: none;"> <b>B12: TP+ (time and amp |P| > |T|) LR- Biphasic</b> <br> 
        ERP: Biphasic (negative/positive). Press: has a larger negative trough before tap; 
        Tap: smaller initial negative, not preceding tap, shifted later in time (but this pattern appears often and may be due to tap/press parameters). <br>
        
        Downward slope before 0.<br><br>
        <b>ERSP:</b> TP+ (press less low f), LR+ (pR more low f) Strongest at 200 ms.  More different from jd.
    </div>

    <img id="cl13" src="../img/dip_ersp/c13.png" />
    <div class = 'textbox' id = 'div13' style = "display: none;"><b>B13: TP+ (time and amp) LR+ (amp;only for press), big trough</b><br>

        TP difference unless latency shift: press before tap, but also deeper troughs.<br>
        - Press left has earlier, stronger response<br><br>
        
        Press' right is higher (maybe not statistic sig.)<br>
        dipole plot could indicate contralateral inhibition, possibly beta desync?<br><br>
        <b>ERSP:</b> TP+ (tap: more power throughout, press more negative) LR+ (pL less active) Different from jd.
    </div>

    <img id="cl14" src="../img/dip_ersp/c14.png" />
    <div class = 'textbox' id = 'div14' style = "display: none;"><b>B14: TP+ (amp and time(?)) LR+ (For tap, in time pre t=0, then amp), multiphasic/chaotic (peak trough peak for tap)</b><br>

        Tap left before TR around 0.  Also Tap's strong activity before 0 is interesting.<br>
        
        Mostly T/P difference, where tap peaks first (while p troughs). (polarity inversion); amp inverted <br>
        Left slightly above right after t=0<br>
        Tap left also peaks slightly before tap right before t=0<br><br>
        <b>ERSP:</b> TP+ (press high freq power tap all range) LR+ (pL more negative low f; tR less active)
        
    </div>

    <script type="text/javascript">
        
        
        // from https://stackoverflow.com/questions/12433313/jquery-loop-through-elements-by-incrementing-id
        // and https://stackoverflow.com/questions/31358668/show-a-div-only-when-a-button-clicked
        $(document).ready(function() {
            for(var i = 3; i < 15; ++i) {
                $(document).on('click','#cl' + i, (function(index) {
                    return function() {
                        $("#div"+index).css({top: event.pageY, left: event.pageX}).toggle();
                    };
                })(i));
            }
        });

        var dataset = {
              "nodes": [
              { "cluster": "4", "x" : 940, "y": 1135},
              { "cluster": "5", "x":1530, "y": 1670},
              { "cluster": "6", "x":1200, "y": 533},
              { "cluster": "8", "x":2298, "y": 879},
              { "cluster": "11", "x":2281, "y": 1121},
              { "cluster": "9", "x":1512, "y": 1046},
              { "cluster": "14", "x":2337, "y": 1291}
              ],
              "edges": [
              { "source": "4", "target": "11", "color" : "#5eeb34" },
              { "source": "5", "target": "6", "color" : "#5eeb34" },
              { "source": "6", "target": "8", "color" : "#5eeb34" },
              { "source": "5", "target": "8", "color" : '#34ebe1' },
              { "source": "9", "target": "14", "color" : "#5eeb34" }
              ]
              };
        var w = 3000;
        var h = 3000;

        // let svg = d3.select("body")
		// 				.append("svg")
		// 				.attr("width", w)
        //                 .attr("height", h);

        // $("svg").css({top: 0, left: 0, position:'absolute' });

        let svg = d3.select("#graph")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h)
                    .style('position','absolute') //replaces jquery's .css
                    .style('top',0)
                    .style('left',0);               
        

        var force = d3.forceSimulation(dataset.nodes)
        .force("charge", d3.forceManyBody())
        .force("link", d3.forceLink(dataset.edges).id(function(d) { return d.cluster; }));
        // .force("center", d3.forceCenter().x(w/2).y(h/2));

        var edges = svg.selectAll("line")
            .data(dataset.edges)
            .enter()
            .append("line")
            .style("stroke", function(d) { return d.color; })
            .style("stroke-opacity", .5)
            .style("stroke-width", 10)
            .attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        var nodes = svg.selectAll("circle")
            .data(dataset.nodes)
            .enter()
            .append("circle")
            .attr("r", 20)
            .attr("cx", function(d) {
                return d.x;
            })
            .attr("cy", function(d) {
                return d.y; })
            .style("fill", 'green');
            
        //   , function(d, i) {
        //   return colors(i);
        //   });

                  force.on("tick", function() {
            //   edges.attr("x1", function(d) { return d.source.x; })
            //   .attr("y1", function(d) { return d.source.y; })
            //   .attr("x2", function(d) { return d.target.x; })
            //   .attr("y2", function(d) { return d.target.y; });
             
            //   nodes.attr("cx", function(d) { return d.x; })
            //   .attr("cy", function(d) { return d.y; });

             
              });

//               d3.selectAll("circle").on("mouseover", function(){
//     d3.select(this).raise(); 
// });


  </script>
</body>
</html>